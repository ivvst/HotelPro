<div class="layout" *ngIf="isLoggedIn(); else dashboardOnly">
  <!-- Sidebar -->
  <aside class="sidebar" [class.closed]="!sidebarVisible">
    <h2 class="logo" [routerLink]="['/']">Hotel UI</h2>

    <nav class="sidebar-nav">
      <ul>
        <!-- Dashboard -->
        <li class="menu-item" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }">
          <a routerLink="/home">
            <svg class="icon" viewBox="0 0 24 24">
              <path d="M3 12l9-9 9 9-1.5 1.5L12 4.5 4.5 13.5z" />
              <path d="M12 21V9h6v12z" />
            </svg>
            Dashboard
          </a>
        </li>

        <li class="section-title">LAYOUTS & PAGES</li>

        <!-- Pages -->
        <li class="menu-item has-sub" [class.open]="openMenu === 'pages'">
          <button
            class="submenu-toggle"
            (click)="toggleMenu('pages')"
            [attr.aria-expanded]="openMenu === 'pages'"
            aria-controls="submenu-pages">
            <svg class="icon" viewBox="0 0 24 24">
              <path d="M3 7h18M3 12h18M3 17h18" />
            </svg>
            Pages
            <svg class="icon-chevron" viewBox="0 0 24 24">
              <path d="M6 9l6 6 6-6" />
            </svg>
          </button>
          <ul class="sub-menu" id="submenu-pages">
            <li routerLinkActive="active"><a routerLink="/catalog">Guest-Catalog</a></li>
            <li routerLinkActive="active"><a routerLink="/cruise">Cruises</a></li>
          </ul>
        </li>

        <!-- Authentication -->
        <li class="menu-item has-sub" [class.open]="openMenu === 'auth'">
          <button
            class="submenu-toggle"
            (click)="toggleMenu('auth')"
            [attr.aria-expanded]="openMenu === 'auth'"
            aria-controls="submenu-auth">
            Authentication
            <svg class="icon-chevron" viewBox="0 0 24 24">
              <path d="M6 9l6 6 6-6" />
            </svg>
          </button>

          <!-- –ì–æ—Å—Ç–∏ -->
          <ul class="sub-menu" id="submenu-auth" *ngIf="openMenu === 'auth' && !userService.isLogged">
            <li routerLinkActive="active"><a routerLink="/login">Login</a></li>
            <li routerLinkActive="active"><a routerLink="/register">Register</a></li>
          </ul>

          <!-- –õ–æ–≥–Ω–∞—Ç –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª -->
          <ul class="sub-menu" *ngIf="openMenu === 'auth' && userService.isLogged">
            <li routerLinkActive="active"><a routerLink="/profile">My Profile</a></li>
            <li><button type="button" (click)="logout()">Logout</button></li>
          </ul>
        </li>

        <!-- Room -->
        <li class="menu-item" routerLinkActive="active">
          <a routerLink="/room" fragment="table">
            <svg class="icon" viewBox="0 0 24 24">
              <path d="M3 3h18v8H3zM3 13h18v8H3z" />
            </svg>
            Room
          </a>
        </li>

        <li class="section-title">UI COMPONENTS</li>

        <!-- Components -->
        <li class="menu-item has-sub" [class.open]="openMenu === 'components'">
          <button
            class="submenu-toggle"
            (click)="toggleMenu('components')"
            [attr.aria-expanded]="openMenu === 'components'"
            aria-controls="submenu-components">
            <svg class="icon" viewBox="0 0 24 24">
              <path d="M4 4h16v16H4z" />
            </svg>
            Components
            <svg class="icon-chevron" viewBox="0 0 24 24">
              <path d="M6 9l6 6 6-6" />
            </svg>
          </button>
          <ul class="sub-menu" id="submenu-components">
            <li routerLinkActive="active"><a routerLink="/guest">Accordions</a></li>
            <li *ngIf="userService.user?.role === 'admin'">
              <a routerLink="/users">–í—Å–∏—á–∫–∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏</a>
              <a routerLink="/admin-dashboard">Statistic</a>
            </li>
          </ul>
        </li>
      </ul>
    </nav>
  </aside>

  <!-- Main content -->
  <div class="content">
    <header class="topbar">
      <nav class="top-nav">
        <button class="btn-hamburger" (click)="toggleSidebar()" aria-label="Toggle sidebar">
          <span class="hamburger-line"></span>
          <span class="hamburger-line"></span>
          <span class="hamburger-line"></span>
        </button>

      

        <div class="nav-actions" *ngIf="userService.isLogged">
          <!-- Notifications -->
          <div class="nav-notify">
            <button class="btn-notif" aria-label="Notifications" (click)="toggleNotifications()">üîî</button>
            <app-notify-dropdown [open]="notifDropdownOpen"></app-notify-dropdown>
          </div>

          <!-- Profile -->
          <div class="nav-profile" tabindex="0" (click)="toggleProfileMenu()">
            <img
              src="https://static.vecteezy.com/system/resources/previews/019/465/366/original/3d-user-icon-on-transparent-background-free-png.png"
              alt="User" class="profile-img" />
            <span class="status-indicator"></span>

            <ul class="user-dropdown" role="menu" aria-label="User menu" [class.open]="profileDropdownOpen">
              <li role="none">
                <button role="menuitem" type="button" (click)="loadProfile()">–í–∑–µ–º–∏ –ø—Ä–æ—Ñ–∏–ª</button>
              </li>
              <li role="none">
                <button role="menuitem" type="button" (click)="logout()">–ò–∑—Ö–æ–¥</button>
              </li>
            </ul>
          </div>
        </div>
      </nav>
    </header>

    <main class="main">
      <router-outlet></router-outlet>
    </main>
  </div>
</div>

<ng-template #dashboardOnly>
  <router-outlet></router-outlet>
</ng-template>
